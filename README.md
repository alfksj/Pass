# Pass
![GitHub](https://img.shields.io/github/license/alfksj/PluginCore)
## Pass는 같은 네트워크 내에서 쉬운 파일 공유를 할 수 있게 하는 프로그램입니다.
### 다음은 Pass가 작동하는 방법을 설명한 것 입니다.
> #### 1. 로컬 네트워크 스캔   
> 공유 가능한 기기를 찾는 과정으로써 통칭 Ping이라고 합니다.
> 1. UDP로 같은 라우터에 연결된 모든 기기에 브로드캐스트를 합니다(포트 24698번 사용).   
> 2. Pass가 실행중이 기기가 1.1에서 보낸 패킷을 수신받으면 다음 조건에 따라 TCP로 응답을 합니다. 한가지 조건이라도 충족되면 Ping을 거부합니다(포트 24698번 사용).
> * 사용자가 공유를 활성화하지 않았는가?
> * 수신자와 발신자의 Pass 버전이 다른가?
> * 수신자와 발신자의 IP주소가 일치하는가?   
> 3. Ping을 보낸 Pass는 돌아온 응답을 확인하여 Ping을 허용한 기기를 공유가능한 리스트에 표시합니다.   

> #### 2. 파일 공유
> 공유 가능한 기기로 파일을 보내도록 지시하면 다음과 같은 순서로 두 Pass 프로그램이 통신합니다.   
> 두 Pass프로그램을 각각 A, B라고 하며 A가 B에게 파일을 공유하는 상황입니다.   
> 1. A가 B의 서버에 "handshake"라는 메시지를 보내며 통신이 시작됩니다.   
> 2. B는 A가 파일을 1.2의 조건에 따라 A의 파일 공유를 허락할지 결정하여 응답합니다.
> 3. B가 공유를 허용하면 B는 RSA의 키쌍을 만들고 공개키를 A에게 보냅니다.
> 4. A는 AES 비밀키를 만들고 RSA 공개키로 암호화하여 B에게 보냅니다.
> 5. B는 A가 보낸 데이터를 RSA 비밀키로 복호화하여 AES 비밀키를 취득합니다(이후 모든 통신은 AES로 암호화됩니다).
> 6. A는 공유하고자 하는 파일의 이름과 크기를 확인하여 B에게 보냅니다.
> 7. B는 사용자에게 A의 파일 공유 시도를 알리고 승인을 요구합니다.
> 8. 사용자가 허략한 경우 B는 A에게 승인 메시지를 보냅니다.
